<app-header></app-header>

<div class="game-container">
    <div class="game-header-section">
        <button class="btn-back" (click)="goBack()" aria-label="Atrás">
            <img src="/Icon.svg" alt="Atrás" class="btn-back-icon" width="36" height="36">
        </button>
        <div class="game-title-box">
            <h2 class="game-title">{{ gameTitle }}</h2>
        </div>
    </div>

    <div class="game-main" id="gameMain">
        <div class="board-wrap" #boardWrap>
            <div class="game-board">
                <div class="card-container" *ngFor="let card of cards" (click)="flipCard(card)">
                    <div class="card" 
                        [class.flipped]="card.isFlipped || card.isMatched"
                        [class.matched]="card.isMatched">
                        <div class="card-face card-front"></div>
                        <div class="card-face card-back" [class.highlighted]="card.isFlipped && !card.isMatched">
                            <img [src]="card.imageUrl" [alt]="'Carta ' + card.id">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="progress-wrap" #progressWrap aria-hidden="false">
            <div class="progress-track">
                <div class="progress-fill" [style.height]="progress + '%'" [style.background]="progressGradient" [title]="progress + '%'">
                </div>
            </div>
            <div class="progress-label">{{ progress }}%</div>
        </div>
    </div>

    <div class="victory-modal" *ngIf="gameCompleted">
        <div class="modal-content" [style.border-color]="accentColor">
            <h2>{{ selectedVictoryMessage }}</h2>
            <p>{{ selectedMotivationMessage }}</p>
            <div class="modal-buttons">
                <button class="btn-play-again" [style.background-color]="accentColor" (click)="restartGame()">Repetir</button>
                <button class="btn-menu" (click)="goBack()">Menú</button>
            </div>
        </div>
    </div>
</div>
